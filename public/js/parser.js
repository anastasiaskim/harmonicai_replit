async function m(n){return new Promise((s,e)=>{let t=new FileReader;t.onload=r=>{r.target&&typeof r.target.result=="string"?s(r.target.result):e(new Error("Failed to read file."))},t.onerror=()=>{e(new Error("Failed to read file."))},t.readAsText(n)})}function f(n,s){let e={},t={};if(!n||n.trim().length===0)return{sections:e,patternMatches:t};let r=n.split(/\r?\n/),l=null,i=[],o=[],c=!1;for(let d=0;d<r.length;d++){let a=r[d].trim(),h=!1;for(let p=0;p<s.length;p++)if(s[p].test(a)){h=!0,l?e[l]=i:!c&&o.length>0&&(e.Introduction=o),l=C(a,p),i=[],t[l]=p,c=!0;break}h||(c?i.push(a):o.push(a))}return l?e[l]=i:o.length>0&&(e["Chapter 1"]=o),{sections:e,patternMatches:t}}function C(n,s){let e=n.trim();if(/^\s*(chapter|CHAPTER)\s+(\d+|[IVXLCivxlc]+)/i.test(e)){let t=e.match(/^\s*(chapter|CHAPTER)\s+(\d+|[IVXLCivxlc]+)(?:[:.]\s*(.*))?/i);if(t)return t[3]?`${t[1]} ${t[2]}: ${t[3]}`:`${t[1]} ${t[2]}`}else if(/^\s*(\d+|[IVXLCivxlc]+)\.\s+(.+)$/i.test(e)){let t=e.match(/^\s*(\d+|[IVXLCivxlc]+)\.\s+(.+)$/i);if(t)return`Chapter ${t[1]}: ${t[2]}`}else if(/^\s*(\d+|[IVXLCivxlc]+)\s*$/i.test(e)){let t=e.match(/^\s*(\d+|[IVXLCivxlc]+)\s*$/i);if(t)return`Chapter ${t[1]}`}return e}function x(n){return n.join(`
`)}function g(n,s){s.innerHTML="";for(let e in n)if(n.hasOwnProperty(e)){let t=document.createElement("h2");t.textContent=e,t.className="text-lg font-semibold text-gray-800 mt-4 mb-2",s.appendChild(t);let r=document.createElement("div");r.className="mb-4 text-gray-700";let l=n[e];if(l.length>0)for(let i of l)if(i.trim().length>0){let o=document.createElement("p");o.textContent=i,o.className="mb-2",r.appendChild(o)}else{let o=document.createElement("div");o.className="h-2",r.appendChild(o)}else{let i=document.createElement("p");i.textContent="No content in this section",i.className="text-gray-400 italic",r.appendChild(i)}s.appendChild(r)}}function u(n,s,e="## Section \\d+"){document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById(n),r=document.getElementById(s);if(!t||!r){console.error("Could not find required elements:",{fileInputId:n,outputElementId:s});return}t.addEventListener("change",async l=>{let i=l.target;if(i.files&&i.files.length>0){let o=i.files[0];try{let c=await m(o),d=new RegExp(e),{sections:a}=f(c,[d]);g(a,r)}catch(c){console.error("Error processing file:",c),r.innerHTML=`
                        <div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded">
                            <p class="font-medium">Error processing file</p>
                            <p class="text-sm">${c instanceof Error?c.message:"Unknown error"}</p>
                        </div>
                    `}}})})}window.TextParser={readFile:m,parseSections:f,formatSectionContent:x,displaySections:g,initializeFileParser:u};document.addEventListener("DOMContentLoaded",()=>{console.log("Text Parser module loaded");let n=document.getElementById("fileInput"),s=document.getElementById("output");n&&s&&u("fileInput","output")});
//# sourceMappingURL=parser.js.map
